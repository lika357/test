        -:    0:Source:generation_tests.c
        -:    0:Graph:generation_tests.gcno
        -:    0:Data:-
        -:    0:Runs:0
        -:    1:#include "generation.h"
        -:    2:
        -:    3://1 компилируем 1 файл где есть реализация тестируемых функций
        -:    4://2 собираю в библиотеку
        -:    5://3 компилирую тест -fprofile-arcs -ftest-coverage
        -:    6://4 собираю тест линкуя его с библиотекой 2 и ковередж 
        -:    7://5 
        -:    8:
        -:    9:#include <stdlib.h>
        -:   10:#include <string.h>
        -:   11:#include <time.h>
        -:   12:#include "vector.h"
        -:   13:#include "assert.h"
        -:   14:#include <stdio.h>
        -:   15:
    #####:   16:void test_one() {
        -:   17:    
    #####:   18:    building* b = generation_building(1);
        -:   19:
    #####:   20:    assert(b!=NULL);
    #####:   21:    assert(b[0].developer[0] != '\0');
    #####:   22:    assert(b[0].microdistrict[0] != '\0');
    #####:   23:    assert(b[0].type >= 0 && b[0].type <= 2);
    #####:   24:    assert(b[0].year >= 1900 && b[0].year <= 2025);
    #####:   25:    assert(b[0].elevator==0 || b[0].elevator==1);
    #####:   26:    assert(b[0].garbage_chute==0 || b[0].garbage_chute==1);
    #####:   27:    assert(b[0].apartments>=50 && b[0].apartments<=550);
    #####:   28:    assert(b[0].floors>=5 && b[0].floors<=25);
    #####:   29:    assert(b[0].average_apartment_area>39 && b[0].average_apartment_area<61);
        -:   30:    
    #####:   31:    free(b);
    #####:   32:}
    #####:   33:void test_many() {
        -:   34:    
    #####:   35:    building* buildings = generation_building(5);
        -:   36:    
    #####:   37:    assert(buildings!=NULL);
    #####:   38:        size_t n = 0;
    #####:   39:    for (size_t i = 0; i < 5; i++) {
    #####:   40:        for (size_t j = i+1; j < 5; j++) {
    #####:   41:            if (buildings[i].developer != buildings[j].developer||
    #####:   42:                buildings[i].microdistrict != buildings[j].microdistrict ||
    #####:   43:                buildings[i].type != buildings[j].type  ||
    #####:   44:                buildings[i].year != buildings[j].year||
    #####:   45:                buildings[i].elevator != buildings[j].elevator ||
    #####:   46:                buildings[i].garbage_chute != buildings[j].garbage_chute ||
    #####:   47:                buildings[i].apartments != buildings[j].apartments||
    #####:   48:                buildings[i].floors != buildings[j].floors ||
    #####:   49:                buildings[i].average_apartment_area != buildings[j].average_apartment_area)
        -:   50:                {
    #####:   51:                n++;
        -:   52:            }
        -:   53:        }
        -:   54:    }
        -:   55:    
    #####:   56:    assert(n > 0);
        -:   57:    
    #####:   58:    free(buildings);
    #####:   59:}
        -:   60:
    #####:   61:void test_zero() {
        -:   62:    
    #####:   63:    building* buildings = generation_building(0);
        -:   64:    
    #####:   65:    assert(buildings != NULL);
    #####:   66:}
        -:   67:
        -:   68:
    #####:   69:int main() {
        -:   70:    
    #####:   71:    test_one();
    #####:   72:    test_many();
    #####:   73:    test_zero();
    #####:   74:    printf("успешных проверок: %zu\n", get_true_tests());
    #####:   75:    printf("неудачных проверок: %zu\n", get_failed_tests());
        -:   76:    
    #####:   77:    return 0;
        -:   78:}
